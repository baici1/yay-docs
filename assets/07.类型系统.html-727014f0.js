import{_ as i}from"./plugin-vue_export-helper-c27b6911.js";import{r as c,o,c as p,a as n,b as s,f as a,d as t}from"./app-12e502b6.js";const l={},d=n("h1",{id:"ç±»å‹ç³»ç»Ÿ",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#ç±»å‹ç³»ç»Ÿ","aria-hidden":"true"},"#"),s(" ç±»å‹ç³»ç»Ÿ")],-1),u={href:"https://mp.weixin.qq.com/s/qQsLP5o7U8AG_phzGzbjJg",target:"_blank",rel:"noopener noreferrer"},r={href:"https://halfrost.com/go_interface/",target:"_blank",rel:"noopener noreferrer"},m=t(`<h2 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€" aria-hidden="true">#</a> å‰è¨€</h2><p>åœ¨ç¼–è¯‘æœŸé—´ï¼Œç¼–è¯‘å™¨çŸ¥é“æ¯ç§ç±»å‹å®šä¹‰å¾—æ–¹æ³•ï¼Œæ–¹æ³•æœ¬è´¨æ˜¯å‡½æ•°ï¼Œæ‰€ä»¥åœ¨æ–¹æ³•å¾—è°ƒç”¨ä¸Šï¼Œæ¥æ”¶è€…ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ <code>t.F1()==F1(t)</code> ç­‰ä»·å¾—åŸå› ã€‚</p><p>åˆ°äº†æ‰§è¡Œé˜¶æ®µï¼Œä¸ºäº†æ”¯æŒ<strong>åå°„ï¼Œæ¥å£åŠ¨æ€æ´¾å‘ï¼Œç±»å‹æ–­è¨€</strong>è¿™äº›è¯­è¨€ç‰¹æ€§æˆ–æœºåˆ¶ï¼Œç¼–è¯‘å™¨ä¼šç»™æ¯ç§ç±»å‹ç”Ÿæˆå¯¹åº”å¾—<strong>ç±»å‹æè¿°ä¿¡æ¯</strong>å†™å…¥æ‰§è¡Œæ–‡ä»¶ï¼Œè¿™äº›ç±»å‹æè¿°ä¿¡æ¯å°±æ˜¯<strong>ç±»å‹å…ƒæ•°æ®</strong>ã€‚</p><p>ä»¥ä¸‹éƒ½æ˜¯ <code>Go</code> è¯­è¨€çš„å†…ç½®ç±»å‹ï¼š</p><ul><li>å†…ç½®å­—ç¬¦ä¸²ç±»å‹ï¼š<code>string</code>ã€‚</li><li>å†…ç½®å¸ƒå°”ç±»å‹ï¼š<code>bool</code>.</li><li>å†…ç½®æ•°å€¼ç±»å‹ï¼š <ul><li><code>int8</code>ã€<code>uint8</code>ï¼ˆ<code>byte</code>ï¼‰ã€<code>int16</code>ã€<code>uint16</code>ã€<code>int32</code>ï¼ˆ<code>rune</code>ï¼‰ã€<code>uint32</code>ã€<code>int64</code>ã€<code>uint64</code>ã€<code>int</code>ã€<code>uint</code>ã€<code>uintptr</code>ã€‚</li><li><code>float32</code>ã€<code>float64</code>ã€‚</li><li><code>complex64</code>ã€<code>complex128</code>ã€‚</li></ul></li></ul><p>æ³¨ï¼š<code>byte</code>æ˜¯<code>uint8</code>çš„ä¸€ä¸ªå†…ç½®åˆ«åï¼Œ<code>rune</code>æ˜¯<code>int32</code>çš„ä¸€ä¸ªå†…ç½®åˆ«åã€‚</p><p>æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰ç±»å‹ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">//å¯ä»¥ç»™è‡ªå®šä¹‰ç±»å‹å®šä¹‰æ–¹æ³•ã€‚</span>
<span class="token keyword">type</span> T1 <span class="token builtin">int</span>
<span class="token comment">//å¯ä»¥ç»™è‡ªå®šä¹‰ç±»å‹å®šä¹‰æ–¹æ³•ã€‚</span>
<span class="token keyword">type</span> T2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name <span class="token builtin">string</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ¥å£ç±»å‹æ˜¯æ— æ•ˆçš„æ–¹æ³•æ¥æ”¶è€…</span>
<span class="token keyword">type</span> T3 <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">F1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°æ®ç±»å‹å¾ˆå¤šï¼Œä¸ç®¡æ˜¯å†…ç½®ç±»å‹è¿˜æ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œä»–çš„ç±»å‹å…ƒæ•°æ®æ˜¯å…¨å±€å”¯ä¸€çš„ï¼Œè¿™äº›ç±»å‹å…ƒæ•°æ®å…±åŒæ„æˆäº† <code>Go</code> è¯­è¨€çš„<strong>ç±»å‹ç³»ç»Ÿ</strong>ã€‚</p><p>é‚£ä¹ˆå¼€å§‹æ­£é¢˜å§ï¼</p><h2 id="å†…ç½®æ•°æ®ç±»å‹å…ƒæ•°æ®" tabindex="-1"><a class="header-anchor" href="#å†…ç½®æ•°æ®ç±»å‹å…ƒæ•°æ®" aria-hidden="true">#</a> å†…ç½®æ•°æ®ç±»å‹å…ƒæ•°æ®</h2><p>æ¯ä¸ªç±»å‹å…ƒæ•°æ®åŸºç¡€ä¿¡æ¯éƒ½æ”¾åˆ°äº† <code>runtime._type</code> ç»“æ„ä½“ä¸­ï¼Œä½œä¸ºæ¯ä¸ªç±»å‹å…ƒæ•°æ®çš„ <code>Header</code>ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> _type <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    size       <span class="token builtin">uintptr</span> <span class="token comment">//å¤§å°</span>
    ptrdata    <span class="token builtin">uintptr</span> <span class="token comment">//å«æœ‰æ‰€æœ‰æŒ‡é’ˆç±»å‹å‰ç¼€å¤§å°</span>
    hash       <span class="token builtin">uint32</span>  <span class="token comment">//ç±»å‹</span>
    tflag      tflag <span class="token comment">//ç±»å‹çš„ç‰¹å¾æ ‡è®°</span>
    align      <span class="token builtin">uint8</span> <span class="token comment">//ä½œä¸ºæ•´ä½“å˜é‡å­˜æ”¾æ—¶çš„å¯¹é½å­—èŠ‚æ•°</span>
    fieldalign <span class="token builtin">uint8</span> <span class="token comment">//å½“å‰ç»“æ„å­—æ®µçš„å¯¹é½å­—èŠ‚æ•°</span>
    kind       <span class="token builtin">uint8</span> <span class="token comment">//åŸºç¡€ç±»å‹æšä¸¾å€¼å’Œåå°„ä¸­çš„ Kind ä¸€è‡´ï¼Œkind å†³å®šäº†å¦‚ä½•è§£æè¯¥ç±»å‹</span>
    alg        <span class="token operator">*</span>typeAlg <span class="token comment">//æŒ‡å‘ä¸€ä¸ªå‡½æ•°æŒ‡é’ˆè¡¨ï¼Œè¯¥è¡¨æœ‰ä¸¤ä¸ªå‡½æ•°ï¼Œä¸€ä¸ªæ˜¯è®¡ç®—ç±»å‹ Hash å‡½æ•°ã€‚å¦ä¸€ä¸ªæ˜¯æ¯”è¾ƒä¸¤ä¸ªç±»å‹æ˜¯å¦ç›¸åŒçš„ equal å‡½æ•°</span>
    gcdata     <span class="token operator">*</span><span class="token builtin">byte</span> <span class="token comment">//GC ç›¸å…³</span>
    str        nameOff  <span class="token comment">//ç±»å‹åç§°å­—ç¬¦ä¸²åœ¨äºŒè¿›åˆ¶æ–‡ä»¶æ®µä¸­çš„åç§»é‡</span>
    ptrToThis  typeOff <span class="token comment">//ç±»å‹å…ƒä¿¡æ¯æŒ‡é’ˆåœ¨äºŒè¿›åˆ¶æ–‡ä»¶æ®µä¸­çš„åç§»é‡</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>_type</code> å­˜å‚¨åŸºæœ¬ä¿¡æ¯ï¼Œè¿˜æœ‰é¢å¤–éœ€è¦æè¿°çš„ä¿¡æ¯ä¹Ÿéœ€è¦å­˜å‚¨ã€‚ä¾‹å¦‚ <code>slice</code> çš„ç±»å‹å…ƒæ•°æ®åœ¨ <code>_type</code> ç»“æ„ä½“åé¢è®°å½•äº†ä¸€ä¸ª <code>*_type</code>ï¼ŒæŒ‡å‘å…¶å­˜å‚¨å…ƒç´ çš„ç±»å‹å…ƒæ•°æ®ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> slicetype <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    typ   _type
    elem  <span class="token operator">*</span>_type <span class="token comment">//æŒ‡å‘å­˜å‚¨å…ƒç´ çš„ç±»å‹å…ƒæ•°æ®ï¼Œå¦‚æœå­˜å‚¨stringç±»å‹ï¼Œé‚£ä¹ˆè¿™ä¸ªæŒ‡é’ˆæŒ‡å‘ string ç±»å‹çš„å…ƒæ•°æ®</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æŒ‡é’ˆç±»å‹ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> ptrtype <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    typ   _type
    elem  <span class="token operator">*</span>_type <span class="token comment">//æŒ‡å‘ æŒ‡é’ˆç±»å‹æŒ‡å‘çš„ç±»å‹å…ƒæ•°æ® ä¾‹å¦‚ *int é‚£ä¹ˆelemæŒ‡å‘ int ç±»å‹çš„å…ƒæ•°æ®</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœ‰äº›å†…ç½®ç±»å‹å°±æ²¡æœ‰è¿™ä¹ˆç®€å•ã€‚ä¾‹å¦‚ <code>map</code>ï¼Œ<code>struct</code>ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> maptype <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	typ    _type
	key    <span class="token operator">*</span>_type
	elem   <span class="token operator">*</span>_type
	bucket <span class="token operator">*</span>_type <span class="token comment">// internal type representing a hash bucket</span>
	<span class="token comment">// function for hashing keys (ptr to key, seed) -&gt; hash</span>
	hasher     <span class="token keyword">func</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span>Pointer<span class="token punctuation">,</span> <span class="token builtin">uintptr</span><span class="token punctuation">)</span> <span class="token builtin">uintptr</span>
	keysize    <span class="token builtin">uint8</span>  <span class="token comment">// size of key slot</span>
	elemsize   <span class="token builtin">uint8</span>  <span class="token comment">// size of elem slot</span>
	bucketsize <span class="token builtin">uint16</span> <span class="token comment">// size of bucket</span>
	flags      <span class="token builtin">uint32</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> structtype <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	typ     _type
	pkgPath name
	fields  <span class="token punctuation">[</span><span class="token punctuation">]</span>structfield
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,19),k={href:"https://go.dev/src/runtime/type.go",target:"_blank",rel:"noopener noreferrer"},v=t(`<h2 id="è‡ªå®šä¹‰ç±»å‹å…ƒæ•°æ®" tabindex="-1"><a class="header-anchor" href="#è‡ªå®šä¹‰ç±»å‹å…ƒæ•°æ®" aria-hidden="true">#</a> è‡ªå®šä¹‰ç±»å‹å…ƒæ•°æ®</h2><p>å¦‚æœæ˜¯è‡ªå®šä¹‰ç±»å‹ï¼Œé‚£ä¹ˆç±»å‹å…ƒæ•°æ®çš„ç»“æ„ä½“åé¢è¿˜ä¼šæœ‰ä¸€ä¸ª <code>uncommontype</code> ç»“æ„ä½“ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> uncommontype <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    pkgpath nameOff <span class="token comment">//è®°å½•ç±»å‹æ‰€åœ¨çš„åŒ…è·¯å¾„ï¼›</span>
    mcount  <span class="token builtin">uint16</span>  <span class="token comment">// è®°å½•äº†è¯¥ç±»å‹å…³è”åˆ°å¤šå°‘ä¸ªæ–¹æ³•ï¼›</span>
    <span class="token boolean">_</span>       <span class="token builtin">uint16</span> <span class="token comment">// unused</span>
    moff    <span class="token builtin">uint32</span>  <span class="token comment">//è®°å½•çš„æ˜¯è¿™äº›æ–¹æ³•çš„å…ƒæ•°æ®ç»„æˆçš„æ•°ç»„ï¼Œç›¸å¯¹äºè¿™ä¸ªuncommontypeç»“æ„ä½“åç§»äº†å¤šå°‘å­—èŠ‚ã€‚</span>
<span class="token punctuation">}</span>
<span class="token comment">//æ–¹æ³•å…ƒæ•°æ®</span>
<span class="token keyword">type</span> method <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    name nameOff <span class="token comment">// æ–¹æ³•åç§°åç§»é‡ </span>
    mtyp typeOff <span class="token comment">//æ–¹æ³•çš„ç±»å‹å…ƒæ•°æ®</span>
    ifn  textOff <span class="token comment">//fn used in interface call (one-word receiver)</span>
    tfn  textOff <span class="token comment">//fn used for normal method call</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> myslice <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token comment">//å®šä¹‰äº†ä¸€ä¸ªæ–°çš„ç±»å‹ myslice</span>
<span class="token comment">//å®šä¹‰çš„ä¸¤ä¸ªæ–¹æ³•</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>ms myslice<span class="token punctuation">)</span> <span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>ms myslice<span class="token punctuation">)</span> <span class="token function">Cap</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">cap</span><span class="token punctuation">(</span>ms<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>myslice</code> ç±»å‹å…ƒæ•°æ®ç”±ä»¥ä¸‹æ„æˆï¼š</p><ul><li><code>slicetype</code> ç±»å‹æè¿°ä¿¡æ¯</li><li><code>uncommontype</code> ç»“æ„ä½“</li></ul><p>æ³¨ï¼šæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>uncommontype</code> ç»“æ„ä½“æ‰¾åˆ° <code>myslice</code> çš„æ–¹æ³•å…ƒæ•°æ®åˆ—è¡¨ã€‚</p><figure><img src="https://mmbiz.qpic.cn/mmbiz_png/ibjI8pEWI9L6zYKaJegOORJTgR9YoDe543OpVCTUInWcbfDosK4qObJFAPjMWGX5H1icdYE7gHUq2S2KbbpDJBKA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure><h2 id="alias-åˆ«å" tabindex="-1"><a class="header-anchor" href="#alias-åˆ«å" aria-hidden="true">#</a> alias åˆ«å</h2><p>åœ¨å†…ç½®æ•°æ®é‡Œé¢ï¼Œ<code>byte</code>æ˜¯<code>uint8</code>çš„ä¸€ä¸ªå†…ç½®åˆ«åï¼Œ<code>rune</code>æ˜¯<code>int32</code>çš„ä¸€ä¸ªå†…ç½®åˆ«åã€‚</p><p>ä»¥ä¸‹æœ‰ä¸¤ç§æ–¹æ³•ï¼Œä»–ä»¬æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> MyType1 <span class="token operator">=</span> <span class="token builtin">int32</span>
<span class="token keyword">type</span> MyType2 <span class="token builtin">int32</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>ç¬¬ä¸€ç§æ–¹å¼å«åšç±»å‹ <code>int32</code> å–åˆ«åã€‚å®é™…ä¸Š <code>MyType1</code> å’Œ <code>int32</code> ä¼šå…³è”åˆ°åŒä¸€ä¸ªç±»å‹å…ƒæ•°æ®ï¼Œå±äºåŒä¸€ç§ç±»å‹ã€‚</li></ul><figure><img src="https://mmbiz.qpic.cn/mmbiz_png/ibjI8pEWI9L6zYKaJegOORJTgR9YoDe54FfpzsjyfEhRNOM8K1wfKSXRsDrLUrWfeU8SyNDx8pw2b0Jb3AOZG7A/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure><ul><li>ç¬¬äºŒç§æ–¹å¼å±äºåˆ›å»ºæ–°ç±»å‹ï¼Œæ‹¥æœ‰è‡ªå·±çš„ç±»å‹å…ƒæ•°æ®ï¼Œ<code>MyType2</code> å’Œ <code>int32</code> æ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»å‹ï¼Œå¯¹åº”å…ƒæ•°æ®ä¹Ÿä¼šä¸åŒã€‚</li></ul><figure><img src="https://mmbiz.qpic.cn/mmbiz_png/ibjI8pEWI9L6zYKaJegOORJTgR9YoDe54rmcOeCBMj9LjkDERA1W4Q1dQH1ibqUbvonqZZUI1eUhDZGQLwAlfRVg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure>`,17);function b(g,y){const e=c("ExternalLinkIcon");return o(),p("div",null,[d,n("blockquote",null,[n("p",null,[s("æ¨èé˜…è¯»ï¼š"),n("a",u,[s("ã€Golangã€‘ç±»å‹ç³»ç»Ÿ"),a(e)])]),n("p",null,[n("a",r,[s("æ·±å…¥ç ”ç©¶ Go interface åº•å±‚å®ç°"),a(e)])])]),m,n("p",null,[s("ä½†æ˜¯åŸºæœ¬ç»“æ„éƒ½æ˜¯å¦‚æ­¤ã€‚å¯ä»¥æ¥ "),n("a",k,[s("type.go"),a(e)]),s(" æ¥çœ‹çœ‹å†…ç½®ç±»å‹çš„å…ƒæ•°æ®")]),v])}const _=i(l,[["render",b],["__file","07.ç±»å‹ç³»ç»Ÿ.html.vue"]]);export{_ as default};
