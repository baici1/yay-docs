import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as e,o as p,c as o,a as n,b as s,f as c,d as i}from"./app-12e502b6.js";const l={},u=n("h1",{id:"åå°„",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#åå°„","aria-hidden":"true"},"#"),s(" åå°„")],-1),d={href:"https://mp.weixin.qq.com/s?__biz=Mzg5NjIwNzIxNQ==&mid=2247484172&idx=1&sn=06299f7bb8751e41d0395e565a919878&chksm=c005d30cf7725a1a8a3c7c6aade78b5041b8556b334994f737c88857959b625f844f5f9f76dd&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},r=i(`<h2 id="å‰è¨€" tabindex="-1"><a class="header-anchor" href="#å‰è¨€" aria-hidden="true">#</a> å‰è¨€</h2><p>ç”¨åˆ°åå°„çš„åœºæ™¯ä¸å¤šï¼Œä¸€èˆ¬æ˜¯å˜é‡ç±»å‹ä¸ç¡®å®šï¼Œå†…éƒ¨ç»“æ„ä¸æ˜æœ—çš„æƒ…å†µï¼Œåæ­£æˆ‘ç°åœ¨ä¸€æ¬¡éƒ½æ²¡æœ‰ç”¨è¿‡ï¼Œä½†æ˜¯ä¸å¦¨ç¢æˆ‘ä»¬æ¥çœ‹çœ‹åº•å±‚åˆ°åº•æ˜¯æ€ä¹ˆå›äº‹ã€‚</p><p><code>reflect</code> æœ‰ä¸¤ä¸ªæ ¸å¿ƒç±»å‹ï¼š<code>reflect.Type</code> å’Œ <code>reflect.Value</code>ã€‚ä»–ä»¬æ’‘èµ·äº†åå°„åŠŸèƒ½çš„åŸºæœ¬æ¡†æ¶ã€‚</p><h2 id="type" tabindex="-1"><a class="header-anchor" href="#type" aria-hidden="true">#</a> Type</h2><p><code>reflect.Type</code> æ˜¯ä¸€ä¸ªæ¥å£ç±»å‹ï¼Œå®šä¹‰äº†ä¸€ç³»åˆ—æ–¹æ³•è·å–ç±»å‹å„æ–¹é¢çš„ä¿¡æ¯ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> Type <span class="token keyword">interface</span> <span class="token punctuation">{</span>
    <span class="token function">Align</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token comment">//å¯¹é½è¾¹ç•Œ</span>
    <span class="token function">FieldAlign</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token comment">//ä½œä¸ºç»“æ„ä½“å­—æ®µçš„å¯¹é½è¾¹ç•Œ</span>
    <span class="token function">Method</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">)</span> Method <span class="token comment">//è·å–æ–¹æ³•æ•°ç»„ä¸­ç¬¬iä¸ªMethod</span>
    <span class="token function">MethodByName</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>Method<span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token comment">//æŒ‰ç…§åç§°æŸ¥æ‰¾æ–¹æ³•</span>
    <span class="token function">NumMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token comment">//æ–¹æ³•åˆ—è¡¨ä¸­å¯å¯¼å‡ºæ–¹æ³•çš„æ•°ç›®</span>
    <span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token comment">//ç±»å‹åç§°</span>
    <span class="token function">PkgPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token comment">//åŒ…è·¯å¾„</span>
    <span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">uintptr</span> <span class="token comment">//è¯¥ç±»å‹å˜é‡å ç”¨å­—èŠ‚æ•°</span>
    <span class="token function">String</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token comment">//è·å–ç±»å‹çš„å­—ç¬¦ä¸²è¡¨ç¤º</span>
    <span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Kind <span class="token comment">//ç±»å‹å¯¹åº”çš„reflect.Kind</span>
    <span class="token function">Implements</span><span class="token punctuation">(</span>u Type<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token comment">//è¯¥ç±»å‹æ˜¯å¦å®ç°äº†æ¥å£u</span>
    <span class="token function">AssignableTo</span><span class="token punctuation">(</span>u Type<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token comment">//æ˜¯å¦å¯ä»¥èµ‹å€¼ç»™ç±»å‹u</span>
    <span class="token function">ConvertibleTo</span><span class="token punctuation">(</span>u Type<span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token comment">//æ˜¯å¦å¯è½¬æ¢ä¸ºç±»å‹u</span>
    <span class="token function">Comparable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token comment">//æ˜¯å¦å¯æ¯”è¾ƒ</span>

    <span class="token comment">//åªèƒ½åº”ç”¨äºæŸäº›Kindçš„æ–¹æ³•</span>
    <span class="token comment">//Int*, Uint*, Float*, Complex*: </span>
    <span class="token function">Bits</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span>

    <span class="token comment">//Array,Ptr,Slice,Map: </span>
    <span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Type
    <span class="token comment">//Array</span>
    <span class="token function">Len</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
        
    <span class="token comment">//Chan:ChanDir, Elem </span>
    <span class="token function">ChanDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> ChanDir

    <span class="token comment">//Func: </span>
    <span class="token function">In</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> Type
    <span class="token function">NumIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
    <span class="token function">Out</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> Type
    <span class="token function">NumOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span>
    <span class="token function">IsVariadic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>

    <span class="token comment">//Map: </span>
    <span class="token function">Key</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Type

    <span class="token comment">//Struct: </span>
    <span class="token function">Field</span><span class="token punctuation">(</span>i <span class="token builtin">int</span><span class="token punctuation">)</span> StructField
    <span class="token function">FieldByIndex</span><span class="token punctuation">(</span>index <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span> StructField
    <span class="token function">FieldByName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>StructField<span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span>
    <span class="token function">FieldByNameFunc</span><span class="token punctuation">(</span>match <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>StructField<span class="token punctuation">,</span> <span class="token builtin">bool</span><span class="token punctuation">)</span>  
    <span class="token function">NumField</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span>

    <span class="token function">common</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>rtype
    <span class="token function">uncommon</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span>uncommonType
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬é€šå¸¸ä¼šç”¨ <code>reflect.TypeOf</code> è¿™ä¸ªå‡½æ•°å»æ‹¿åˆ° <code>reflect.Type</code> ç±»å‹çš„è¿”å›å€¼ã€</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// TypeOf è¿”å›è¡¨ç¤º i çš„åŠ¨æ€ç±»å‹çš„åå°„ç±»å‹ã€‚å¦‚æœ i æ˜¯ä¸€ä¸ª nil æ¥å£å€¼ï¼Œåˆ™ TypeOf è¿”å› nilã€‚</span>
<span class="token keyword">func</span> <span class="token function">TypeOf</span><span class="token punctuation">(</span>i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> Type <span class="token punctuation">{</span>
	eface <span class="token operator">:=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>emptyInterface<span class="token punctuation">)</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">return</span> <span class="token function">toType</span><span class="token punctuation">(</span>eface<span class="token punctuation">.</span>typ<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>	a<span class="token operator">:=</span><span class="token string">&quot;eggo&quot;</span>
	t<span class="token operator">:=</span>reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬è¦åå°„ <code>int</code> ç±»å‹çš„å˜é‡ <code>a</code>ã€‚</p><p>æˆ‘ä»¬ä¾æ—§ä»å‡½æ•°è°ƒç”¨æ ˆå¼€å§‹åˆ†æï¼Œ<code>main</code> å‡½æ•°æ ˆå¸§ä¸­æœ‰ä¸¤ä¸ªå±€éƒ¨å˜é‡ <code>t</code> ä¸ <code>a</code>ï¼Œç„¶åæ˜¯è¿”å›å€¼ç©ºé—´ï¼Œæœ€åæ˜¯å‚æ•°ã€‚æˆ‘ä»¬çŸ¥é“ <code>Go</code> è¯­è¨€ä¸­å‚æ•°éƒ½æ˜¯å€¼æ‹·è´ã€‚éš¾é“è¿™é‡Œå‚æ•°æ˜¯æ‹·è´å˜é‡ <code>a</code> çš„å€¼å—ï¼Ÿä¸è¡Œï¼Œ<code>TypeOf</code> å‡½æ•°çš„å‚æ•°ç±»å‹æ˜¯ç©ºæ¥å£ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> eface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    _type <span class="token operator">*</span>_type <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€ç±»å‹å…ƒæ•°æ® </span>
    data  unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€å€¼ã€‚ </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>_type</code> å­—æ®µæ¥å—çš„æ˜¯ <code>a</code> çš„åŠ¨æ€ç±»å‹ï¼Œ<code>data</code> æ¥å—çš„æ˜¯ <code>a</code> çš„åœ°å€ã€‚</p><p><strong>æ‹·è´ä¸äº†å€¼ï¼Œé‚£æ‹·è´å˜é‡ <code>a</code> çš„åœ°å€ï¼Ÿ<strong>ä¹Ÿä¸è¡Œï¼Œå› ä¸ºè¿™æ ·å¹¶ä¸ç¬¦åˆ</strong><code>Go</code> è¯­è¨€ä¸­ä¼ å‚å€¼æ‹·è´</strong>çš„è¯­ä¹‰ï¼Œæ— è®ºå¯¹å‚æ•°åšæ€ä¹ˆæ ·çš„ä¿®æ”¹ï¼Œéƒ½ä¸èƒ½ä½œç”¨åˆ°å±€éƒ¨å˜é‡ã€‚</p><p>**æ—¢ç„¶æ‹·è´ä¸äº†å€¼ï¼Œä¹Ÿä¸èƒ½æ‹·è´å€¼ï¼Œé‚£åº”è¯¥æ€ä¹ˆåŠï¼Ÿ**å®é™…ä¸Šåœ¨ç¼–è¯‘é˜¶æ®µä¼šå¢åŠ ä¸€ä¸ªä¸´æ—¶å˜é‡ä½œä¸º a çš„æ‹·è´å€¼ï¼ˆcopy of aï¼‰ï¼Œå†æŠŠè¿™ä¸ªä¸´æ—¶å˜é‡çš„åœ°å€ä¼ é€’ç»™å‡½æ•°ä½¿ç”¨ï¼Œè¿™æ ·æ— è®ºå‡½æ•°å¯¹å‚æ•°åšæ€ä¹ˆæ ·çš„ä¿®æ”¹ï¼Œéƒ½ä¸ä¼šä½œç”¨åˆ°å±€éƒ¨å˜é‡ aã€‚æ—¢æ»¡è¶³äº†ç©ºæ¥å£ç±»å‹çš„å‚æ•°ä¹Ÿç¬¦åˆä¼ å‚å€¼æ‹·è´çš„è¯­ä¹‰ã€‚</p><figure><img src="https://mmbiz.qpic.cn/mmbiz_png/ibjI8pEWI9L4H10TIVbNxnHRlUuh0icCFIFTLSBz1kfJ5uicMXqhEPv7S5VZR6Mqe39QWiceGfzicBMuwGfIEMSH46g/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure><p><strong>å½“å‚æ•°æ˜¯ç©ºæ¥å£æƒ…å†µï¼Œéƒ½æ˜¯é€šè¿‡ä¼ é€’æ‹·è´åå˜é‡çš„åœ°å€æ¥å®ç°ä¼ å€¼çš„è¯­ä¹‰ã€‚</strong></p><p>æ¥ä¸‹æ¥ï¼Œ<code>reflect.TypeOf</code> å‡½æ•°ä¼šæŠŠ <code>runtime.eface</code> ç±»å‹çš„å‚æ•° <code>i</code> è½¬åŒ–æˆ <code>reflect.emptInterface</code> ç±»å‹å¹¶èµ‹ç»™å˜é‡ <code>eface</code>ï¼Œè½¬æ¢ä»¥åæ–¹ä¾¿ <code>reflect</code> åŒ…æ“ä½œå†…éƒ¨å…ƒç´ ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token comment">// emptyInterface æ˜¯ interface{} å€¼çš„æ ‡å¤´ã€‚</span>
<span class="token keyword">type</span> emptyInterface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	typ  <span class="token operator">*</span>rtype <span class="token comment">//string</span>
	word unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//-&gt;i.data</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å› ä¸º <code>*rtype</code> å®ç°äº† <code>reflect.Type</code> æ¥å£ï¼Œ<code>TypeOf</code> å‡½æ•°è¦åšçš„å°±æ˜¯æŠŠ <code>eface</code> çš„ <code>typ</code> å­—æ®µå–å‡ºæ¥ï¼ŒåŒ…è£…æˆ <code>reflect.Type</code> ç±»å‹çš„è¿”å›å€¼å°±å¯ä»¥äº†ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ <code>toType</code> å‡½æ•°å¹²çš„æ´»</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">toType</span><span class="token punctuation">(</span>t <span class="token operator">*</span>rtype<span class="token punctuation">)</span> Type <span class="token punctuation">{</span>
	<span class="token keyword">if</span> t <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">nil</span>
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> t
<span class="token punctuation">}</span>
<span class="token comment">//ä¸Šé¢çš„ä»£ç å¯ä»¥ç­‰ä»·äº</span>
<span class="token keyword">var</span> ret reflect<span class="token punctuation">.</span>Type
ret <span class="token operator">=</span> eface<span class="token punctuation">.</span>typ
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>reflect.Type</code> æ—¢ç„¶æ˜¯ä¸€ä¸ªéç©ºæ¥å£ï¼Œé‚£ä¹ˆä»–çš„ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> iface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    tab   <span class="token operator">*</span>itab
    data  unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//æ¥å£çš„åŠ¨æ€å€¼ -&gt;eface.typ</span>
<span class="token punctuation">}</span>
<span class="token comment">//itab</span>
<span class="token keyword">type</span> itab <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    inter  <span class="token operator">*</span>interfacetype <span class="token comment">//æ¥å£çš„ç±»å‹å…ƒæ•°æ®  -&gt;reflect.Type</span>
    _type  <span class="token operator">*</span>_type <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€ç±»å‹å…ƒæ•°æ® -&gt;*rtype</span>
    hash   <span class="token builtin">uint32</span> <span class="token comment">//itab._typeä¸­æ‹·è´æ¥çš„ï¼Œç±»å‹å“ˆå¸Œå€¼</span>
    <span class="token boolean">_</span>      <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
    fun    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token builtin">uintptr</span> <span class="token comment">//åŠ¨æ€ç±»å‹å®ç°çš„æ¥å£è¦æ±‚æ–¹æ³•åœ°å€ </span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‚£ä¹ˆæœ€åè¿”å›å€¼çš„ç»“æ„å°±ä¸ <code>iface</code> ç»“æ„å·®ä¸å¤šï¼Œ<code>tab</code> æŒ‡å‘ <code>&lt;reflect.Typeï¼Œ*rtype&gt;</code> å¯¹åº”çš„ <code>itab</code> æŒ‡é’ˆï¼Œ<code>data</code> åˆ™æ˜¯å˜é‡ <code>a</code> çš„åœ°å€ã€‚</p><p>æ¥ä¸‹æ¥é€šè¿‡éç©ºæ¥å£ç±»å‹ <code>t</code> å»è°ƒç”¨å„ç§æ–¹æ³•éƒ½ä¼šå» <code>string</code> ç±»å‹æŸ¥æ‰¾ç›¸å…³æ•°æ®ã€‚</p><h2 id="value" tabindex="-1"><a class="header-anchor" href="#value" aria-hidden="true">#</a> Value</h2><p><code>reflect.Value</code> æ˜¯ä¸€ä¸ªç»“æ„ä½“ç±»å‹ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> Value <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    typ <span class="token operator">*</span>rtype <span class="token comment">//å­˜å‚¨åå°„å˜é‡çš„ç±»å‹å…ƒæ•°æ®æŒ‡é’ˆ</span>
    ptr unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//å­˜å‚¨æ•°æ®åœ°å€</span>
    flag <span class="token comment">//æ˜¯ä¸€ä¸ªä½æ ‡è¯†ç¬¦ï¼Œå­˜å‚¨åå°„å˜é‡å€¼çš„ä¸€äº›æè¿°ä¿¡æ¯ï¼Œä¾‹å¦‚ç±»å‹æ©ç ï¼Œæ˜¯å¦ä¸ºæŒ‡é’ˆï¼Œæ˜¯å¦ä¸ºæ–¹æ³•ï¼Œæ˜¯å¦åªè¯»ç­‰ç­‰</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ¥çœ‹çœ‹åå°„æ˜¯å¦‚ä½•æ›´æ–°å˜é‡å€¼çš„ï¼</p><p>ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>	a <span class="token operator">:=</span> <span class="token string">&quot;eggo&quot;</span>
	v <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
	v<span class="token punctuation">.</span><span class="token function">SetString</span><span class="token punctuation">(</span><span class="token string">&quot;new eggo&quot;</span><span class="token punctuation">)</span>
	<span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token comment">//panic: reflect: reflect.Value.SetString using unaddressable value</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬æ¥çœ‹çœ‹ <code>reflect.ValueOf</code> å‡½æ•°æ˜¯æ€ä¹ˆæ ·çš„ï¼</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">ValueOf</span><span class="token punctuation">(</span>i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> Value <span class="token punctuation">{</span>
	<span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> Value<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">escapes</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token function">unpackEface</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">escapes</span><span class="token punctuation">(</span>x <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> dummy<span class="token punctuation">.</span>b <span class="token punctuation">{</span>
		dummy<span class="token punctuation">.</span>x <span class="token operator">=</span> x
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä»–çš„å‚æ•°æ˜¯ç©ºæ¥å£ç±»å‹ï¼Œæ‰€ä»¥æ¥å—çš„å‚æ•°æ•°æ®æ˜¯å˜é‡ <code>a</code> çš„æ‹·è´å€¼åœ°å€ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> eface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    _type <span class="token operator">*</span>_type <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€ç±»å‹å…ƒæ•°æ®  -&gt;stringtype</span>
    data  unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€å€¼ã€‚  -&gt;&amp;(copy of a)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ ¹æ®ä»£ç æ³¨é‡Šï¼Œ<code>escapes</code> å‡½æ•°ä¼šæŠŠå‚æ•° <code>i</code> æŒ‡å‘å¾—å˜é‡ï¼ˆå˜é‡ <code>a</code> å¾—æ‹·è´å€¼ <code>copy of a</code>ï¼‰é€ƒé€¸åˆ°å †ä¸Šï¼Œé‚£ä¹ˆæ ˆä¸Šåªä¼šç•™ä¸‹ä»–ï¼ˆ<code>copy of a</code>ï¼‰çš„åœ°å€ã€‚</p><figure><img src="https://mmbiz.qpic.cn/mmbiz_png/ibjI8pEWI9L4H10TIVbNxnHRlUuh0icCFIFEQaAmVKibOx4FpMYRu8tMdMziay6s3xiaaWG4jDSMdwzG4b3OIMPKsMQ/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">unpackEface</span><span class="token punctuation">(</span>i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> Value <span class="token punctuation">{</span>
	e <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token operator">*</span>emptyInterface<span class="token punctuation">)</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>i<span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token comment">// NOTE: don&#39;t read e.word until we know whether it is really a pointer or not.</span>
	t <span class="token operator">:=</span> e<span class="token punctuation">.</span>typ
	<span class="token keyword">if</span> t <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> Value<span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	f <span class="token operator">:=</span> <span class="token function">flag</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
	<span class="token keyword">if</span> <span class="token function">ifaceIndir</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		f <span class="token operator">|=</span> flagIndir
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> Value<span class="token punctuation">{</span>t<span class="token punctuation">,</span> e<span class="token punctuation">.</span>word<span class="token punctuation">,</span> f<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç®€å•çœ‹è¿™ä¸ªå‡½æ•°é€»è¾‘ã€‚<code>ValueOf</code> å‡½æ•°çš„è¿”å›å€¼æ˜¯ <code>reflect.Value</code> ç±»å‹ï¼Œè¿”å›å€¼ç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> Value <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    typ <span class="token operator">*</span>rtype <span class="token comment">//å­˜å‚¨åå°„å˜é‡çš„ç±»å‹å…ƒæ•°æ®æŒ‡é’ˆ  -&gt;å°±æ˜¯å‚æ•°çš„ _type</span>
    ptr unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//å­˜å‚¨æ•°æ®åœ°å€ -&gt;&amp;(copy of a) æ ¹æ® unpackEface æ¥çœ‹å®ƒæ¥è‡ªäº emptyInterface.word å†å¾€å‰çœ‹ å…¶å®æ¥è‡ªäº å‚æ•°çš„ data å­—æ®µ</span>
    flag <span class="token comment">//æ˜¯ä¸€ä¸ªä½æ ‡è¯†ç¬¦ï¼Œå­˜å‚¨åå°„å˜é‡å€¼çš„ä¸€äº›æè¿°ä¿¡æ¯ï¼Œä¾‹å¦‚ç±»å‹æ©ç ï¼Œæ˜¯å¦ä¸ºæŒ‡é’ˆï¼Œæ˜¯å¦ä¸ºæ–¹æ³•ï¼Œæ˜¯å¦åªè¯»ç­‰ç­‰</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™ä¸ªè¿”å›å€¼ä¼šè¢«èµ‹å€¼ç»™å±€éƒ¨å˜é‡ <code>v</code>ï¼Œè°ƒç”¨ <code>SetString</code> ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>v Value<span class="token punctuation">)</span> <span class="token function">SetString</span><span class="token punctuation">(</span>x <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	v<span class="token punctuation">.</span><span class="token function">mustBeAssignable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	v<span class="token punctuation">.</span><span class="token function">mustBe</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span>
	<span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>ptr<span class="token punctuation">)</span> <span class="token operator">=</span> x
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>SetString</code> å‡½æ•°ä¼šç”¨åˆ° <code>Value</code> ç±»å‹çš„ <code>ptr</code> å­—æ®µã€‚ä½†æ˜¯ç»è¿‡è¿”å›å€¼èµ‹å€¼å±€éƒ¨å˜é‡ <code>v</code> ä»–çš„å­—æ®µ <code>ptr</code> å¥½åƒæŒ‡å‘çš„æ˜¯ <code>&amp;(copy of a)</code>ï¼Œè¿™æ˜¯ä¸´æ—¶å˜é‡çš„åœ°å€ï¼Œä¸èƒ½ä¿®æ”¹çš„ã€‚æ‰€ä»¥å°±ä¼šæŠ¥é”™ã€‚</p><p>å› ä¸ºä¿®æ”¹è¿™æ ·ä¸€ä¸ªè¿ç”¨æˆ·éƒ½ä¸çŸ¥é“çš„ä¸´æ—¶å˜é‡æ˜¯æ²¡æœ‰ä»»ä½•æ„ä¹‰ï¼ŒåŒæ—¶æˆ‘ä»¬çš„æœ¬æ„æ˜¯è¦ä¿®æ”¹å±€éƒ¨å˜é‡ <code>a</code>ï¼Œæ‰€ä»¥å°±ä¼šå‘ç”Ÿ <code>panic</code>ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token builtin">panic</span><span class="token punctuation">:</span> reflect<span class="token punctuation">:</span> reflect<span class="token punctuation">.</span>Value<span class="token punctuation">.</span>SetString using unaddressable value
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>å¥½åƒè¿™æ ·å­å»ä¿®æ”¹ä¸ç¬¦åˆè¦æ±‚å•Šï¼</p><p>æˆ‘ä»¬å›å¿†ä¸€ä¸‹ï¼Œä¸ºä»€ä¹ˆä¼šå‘ç”Ÿ <code>panic</code>ï¼Ÿæˆ‘ä»¬ä»åé¢ä¸€æ­¥ä¸€æ­¥ç†ä¸€ä¸‹ï¼Œå¤±è´¥åŸå› ã€‚</p><ul><li>v çš„å­—æ®µ ptr æŒ‡å‘æ˜¯ <code>&amp;(copy of a)</code></li><li>ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ª <code>&amp;(copy of a)</code>ï¼Ÿå› ä¸ºä¼ å‚ä¼ çš„æ˜¯å±€éƒ¨å˜é‡ <code>a</code>ï¼Œä¸ºäº†æ»¡è¶³è¯­ä¹‰ã€‚</li></ul><p>æˆ‘ä»¬ç°åœ¨æ˜ç™½äº†ï¼Œè¦æƒ³å»ä¿®æ”¹å˜é‡ <code>a</code>ï¼Œéœ€è¦åå°„ <code>a</code> çš„æŒ‡é’ˆï¼Œåªæœ‰è¿™æ · <code>ptr</code> æ‰ä¼šæŒ‡å‘ <code>&amp;a</code>ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    a <span class="token operator">:=</span> <span class="token string">&quot;eggo&quot;</span>
    v <span class="token operator">:=</span> reflect<span class="token punctuation">.</span><span class="token function">ValueOf</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>a<span class="token punctuation">)</span>
    v<span class="token punctuation">.</span><span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">SetString</span><span class="token punctuation">(</span><span class="token string">&quot;new eggo&quot;</span><span class="token punctuation">)</span>
    <span class="token function">println</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¿™é‡Œä¼ å‚ä¾æ—§æ˜¯å€¼æ‹·è´ï¼Œè¿™æ¬¡æ‹·è´ <code>a</code> çš„åœ°å€ï¼Œ<code>escapes</code> ä¼šå°†å‚æ•°æŒ‡å‘çš„å˜é‡ <code>a</code> é€ƒé€¸åˆ°å †ä¸Šï¼Œé‚£ä¹ˆæ ˆä¸Šåªå­˜ä»–çš„åœ°å€ <code>&amp;a</code>ã€‚</p><figure><img src="https://mmbiz.qpic.cn/mmbiz_png/ibjI8pEWI9L4H10TIVbNxnHRlUuh0icCFIdPficCgTms7VHL5wdicbKqSjtevM1Jc0rs9pFTvr1ejgLpqfXnbqNwQg/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure><p>å‰©ä½™çš„éƒ¨åˆ†ä¸ä¸Šé¢é‚£ä¸ªä¾‹å­ç±»ä¼¼ï¼Œå°±ä¸è¿‡å¤šçš„æè¿°äº†ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ä¸åŒçš„åœ°æ–¹ã€‚</p><p>é€šè¿‡è°ƒç”¨ <code>v.Elem()</code> æ–¹æ³•ç„¶åï¼Œå†è°ƒç”¨çš„çš„ <code>SetString</code> æ–¹æ³•å°±å¯ä»¥ä¿®æ”¹åŸæ¥çš„å˜é‡ <code>a</code>äº†ã€‚</p><blockquote><p>ä¸ºä»€ä¹ˆä¸€å®šè¦å…ˆè°ƒç”¨ <code>Elem</code> æ‹¿åˆ° <code>ptr</code> å†å»ä¿®æ”¹å€¼å‘¢ï¼Ÿ</p><p>è¿™ä¸ªæš‚æ—¶ä¸çŸ¥é“</p></blockquote><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>v Value<span class="token punctuation">)</span> <span class="token function">Elem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> Value <span class="token punctuation">{</span>
	k <span class="token operator">:=</span> v<span class="token punctuation">.</span><span class="token function">kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">switch</span> k <span class="token punctuation">{</span>
	<span class="token keyword">case</span> Interface<span class="token punctuation">:</span>
		<span class="token keyword">var</span> eface <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
		<span class="token keyword">if</span> v<span class="token punctuation">.</span>typ<span class="token punctuation">.</span><span class="token function">NumMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>
			eface <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>ptr<span class="token punctuation">)</span>
		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
			eface <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token keyword">interface</span> <span class="token punctuation">{</span>
				<span class="token function">M</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>ptr<span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		x <span class="token operator">:=</span> <span class="token function">unpackEface</span><span class="token punctuation">(</span>eface<span class="token punctuation">)</span>
		<span class="token keyword">if</span> x<span class="token punctuation">.</span>flag <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
			x<span class="token punctuation">.</span>flag <span class="token operator">|=</span> v<span class="token punctuation">.</span>flag<span class="token punctuation">.</span><span class="token function">ro</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">return</span> x
	<span class="token keyword">case</span> Ptr<span class="token punctuation">:</span>
		ptr <span class="token operator">:=</span> v<span class="token punctuation">.</span>ptr
		<span class="token keyword">if</span> v<span class="token punctuation">.</span>flag<span class="token operator">&amp;</span>flagIndir <span class="token operator">!=</span> <span class="token number">0</span> <span class="token punctuation">{</span>
			ptr <span class="token operator">=</span> <span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span>unsafe<span class="token punctuation">.</span>Pointer<span class="token punctuation">)</span><span class="token punctuation">(</span>ptr<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
		<span class="token comment">// The returned value&#39;s address is v&#39;s value.</span>
		<span class="token keyword">if</span> ptr <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			<span class="token keyword">return</span> Value<span class="token punctuation">{</span><span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		tt <span class="token operator">:=</span> <span class="token punctuation">(</span><span class="token operator">*</span>ptrType<span class="token punctuation">)</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>typ<span class="token punctuation">)</span><span class="token punctuation">)</span>
		typ <span class="token operator">:=</span> tt<span class="token punctuation">.</span>elem
		fl <span class="token operator">:=</span> v<span class="token punctuation">.</span>flag<span class="token operator">&amp;</span>flagRO <span class="token operator">|</span> flagIndir <span class="token operator">|</span> flagAddr
		fl <span class="token operator">|=</span> <span class="token function">flag</span><span class="token punctuation">(</span>typ<span class="token punctuation">.</span><span class="token function">Kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
		<span class="token keyword">return</span> Value<span class="token punctuation">{</span>typ<span class="token punctuation">,</span> ptr<span class="token punctuation">,</span> fl<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>ValueError<span class="token punctuation">{</span><span class="token string">&quot;reflect.Value.Elem&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">kind</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token punctuation">(</span>v Value<span class="token punctuation">)</span> <span class="token function">SetString</span><span class="token punctuation">(</span>x <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	v<span class="token punctuation">.</span><span class="token function">mustBeAssignable</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	v<span class="token punctuation">.</span><span class="token function">mustBe</span><span class="token punctuation">(</span>String<span class="token punctuation">)</span>
	<span class="token operator">*</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span>ptr<span class="token punctuation">)</span> <span class="token operator">=</span> x
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,59);function k(v,m){const a=e("ExternalLinkIcon");return p(),o("div",null,[u,n("blockquote",null,[n("p",null,[s("æ¨èå­¦ä¹ ï¼š"),n("a",d,[s("ã€Golangã€‘å›¾è§£åå°„"),c(a)])])]),r])}const g=t(l,[["render",k],["__file","11.åå°„.html.vue"]]);export{g as default};
