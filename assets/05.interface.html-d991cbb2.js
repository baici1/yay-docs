import{_ as t}from"./plugin-vue_export-helper-c27b6911.js";import{r as o,o as c,c as i,a as n,b as a,f as s,d as p}from"./app-12e502b6.js";const l={},d=n("h1",{id:"æ¥å£-interface",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#æ¥å£-interface","aria-hidden":"true"},"#"),a(" æ¥å£ interface")],-1),r={href:"https://mp.weixin.qq.com/s?__biz=Mzg5NjIwNzIxNQ==&mid=2247484072&idx=2&sn=0363c7102943888e0f390f3f5a9ae662&chksm=c005d2a8f7725bbe068f418f72bd9f8ecc3aec3daf11ba7e7ad80d202e6ad90ceec459c5c7e8&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},u={href:"https://halfrost.com/go_interface/",target:"_blank",rel:"noopener noreferrer"},m=p(`<h2 id="ç©ºæ¥å£-interface" tabindex="-1"><a class="header-anchor" href="#ç©ºæ¥å£-interface" aria-hidden="true">#</a> ç©ºæ¥å£ interface{}</h2><p>ç©ºæ¥å£ç±»å‹å¯ä»¥æ¥å—ä»»æ„ç±»å‹çš„æ•°æ®ã€‚å¹²çš„äº‹æƒ…ä¸å¤šï¼Œè®°å½•æ•°æ®çš„ä½ç½®å’Œæ•°æ®ç±»å‹å³å¯ã€‚ç©ºæ¥å£ç±»å‹å¦‚ä¸‹ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> eface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    _type <span class="token operator">*</span>_type <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€ç±»å‹å…ƒæ•°æ®</span>
    data  unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€å€¼ã€‚</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">var</span> e <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">//è¿™é‡Œå®šäº†ä¸€ä¸ªç©ºæ¥å£ç±»å‹</span>

<span class="token comment">//åœ¨ e æ²¡æœ‰èµ‹å€¼å‰</span>
<span class="token keyword">type</span> eface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    _type <span class="token operator">*</span>_type <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€ç±»å‹å…ƒæ•°æ® -&gt;nil</span>
    data  unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€å€¼ã€‚ -&gt;nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>f<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;eggo.txt&quot;</span><span class="token punctuation">)</span>
e <span class="token operator">=</span> f
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å¦‚æœå°† <code>*os.File</code> ç±»å‹çš„å˜é‡ <code>f</code> èµ‹å€¼ç»™ <code>e</code>ã€‚æ¥çœ‹çœ‹å˜é‡ <code>e</code> çš„ç»“æ„ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> eface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    _type <span class="token operator">*</span>_type <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€ç±»å‹å…ƒæ•°æ® -&gt;*os.File çš„ç±»å‹å…ƒæ•°æ®</span>
    data  unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€å€¼ã€‚ -&gt;f</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>æ³¨ï¼šç±»å‹å…ƒæ•°æ®è¿™é‡Œå¯ä»¥æ‰¾åˆ°ç±»å‹å…³è”çš„æ–¹æ³•å…ƒæ•°æ®åˆ—è¡¨ã€‚</strong></p><figure><img src="https://mmbiz.qpic.cn/mmbiz_png/ibjI8pEWI9L53Y12T80IUoDOdNgcCOb0BBUWtBay6WaLES8uevBQbeM0Amxibne8wIk27uAFpiciawgyn6Y5FpRhFw/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure><h2 id="éç©ºæ¥å£" tabindex="-1"><a class="header-anchor" href="#éç©ºæ¥å£" aria-hidden="true">#</a> éç©ºæ¥å£</h2><p>éç©ºæ¥å£å°±æ˜¯æœ‰æ–¹æ³•åˆ—è¡¨çš„æ¥å£ç±»å‹ã€‚å¦‚æœä¸€ä¸ªå˜é‡æƒ³èµ‹å€¼ä¸€ä¸ªéç©ºæ¥å£ç±»å‹ï¼Œé‚£ä¹ˆå…¶ç±»å‹å¿…é¡»å®ç°è¯¥æ¥å£çš„è¦æ±‚çš„æ‰€æœ‰æ–¹æ³•æ‰è¡Œã€‚éç©ºæ¥å£ç±»å‹å¦‚ä¸‹ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> iface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    tab   <span class="token operator">*</span>itab
    data  unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//æ¥å£çš„åŠ¨æ€å€¼</span>
<span class="token punctuation">}</span>
<span class="token comment">//itab</span>
<span class="token keyword">type</span> itab <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    inter  <span class="token operator">*</span>interfacetype <span class="token comment">//æ¥å£çš„ç±»å‹å…ƒæ•°æ®</span>
    _type  <span class="token operator">*</span>_type <span class="token comment">//æŒ‡å‘æ¥å£çš„åŠ¨æ€ç±»å‹å…ƒæ•°æ®</span>
    hash   <span class="token builtin">uint32</span> <span class="token comment">//itab._typeä¸­æ‹·è´æ¥çš„ï¼Œç±»å‹å“ˆå¸Œå€¼ï¼Œç”¨äºå¿«é€Ÿåˆ¤æ–­ç±»å‹æ˜¯å¦ç›¸ç­‰æ—¶ä½¿ç”¨ï¼Œåç»­ä¼šæœ‰ä»‹ç»</span>
    <span class="token boolean">_</span>      <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token builtin">byte</span>
    fun    <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token builtin">uintptr</span> <span class="token comment">//åŠ¨æ€ç±»å‹å®ç°çš„æ¥å£è¦æ±‚æ–¹æ³•åœ°å€</span>
<span class="token punctuation">}</span>
<span class="token comment">//interfacetype</span>
<span class="token keyword">type</span> interfacetype <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    typ      _type
    pkgpath  name
    mhdr     <span class="token punctuation">[</span><span class="token punctuation">]</span>imethod <span class="token comment">//æ¥å£è¦æ±‚çš„æ–¹æ³•åˆ—è¡¨</span>
<span class="token punctuation">}</span>   
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼š</p><p>æˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª <code>io.ReadWriter</code> çš„æ¥å£ç±»å‹å˜é‡ <code>rw</code>ã€‚è¢«èµ‹å€¼å‰ï¼Œç»“æ„å¦‚ä¸‹ï¼š</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> iface <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    tab   <span class="token operator">*</span>itab  <span class="token comment">//-&gt;nil</span>
    data  unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">//æ¥å£çš„åŠ¨æ€å€¼ -&gt;nil</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code>f<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;eggo.txt&quot;</span><span class="token punctuation">)</span>
rw <span class="token operator">=</span> f
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>æˆ‘ä»¬å°† <code>*os.File</code> ç±»å‹å˜é‡ <code>f</code>ã€‚èµ‹å€¼ç»™ <code>rw</code>ã€‚</p><p>é‚£ä¹ˆ <code>rw</code> çš„åŠ¨æ€å€¼æ˜¯ <code>f</code>ï¼ŒåŠ¨æ€ç±»å‹æ˜¯ <code>*os.File</code>ã€‚<code>itab.fun</code> è¿™ä¸ªæ•°ç»„è®°å½•çš„æ˜¯ <code>*os.File</code> è¿™ä¸ªç±»å‹å®ç°çš„ <code>io.ReadWriter</code> æ¥å£çš„æ–¹æ³•ã€‚</p><figure><img src="https://mmbiz.qpic.cn/mmbiz_png/ibjI8pEWI9L53Y12T80IUoDOdNgcCOb0BbQ8syrnoVjFbicOmEkIpPJBEOucLzmWEWPCEry6vSEeWrXxULZKs4cA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure><p>æ³¨ï¼š<code>rw</code> èƒ½ä½¿ç”¨çš„æ–¹æ³•åªæ˜¯æ¥å£ç±»å‹å·²ç»æ³¨å†Œçš„ã€‚</p><p>æ€»ç»“ï¼š</p><blockquote><p>æ¥å£ï¼Œä½ å¯ä»¥çœ‹ä½œæ˜¯ä¸€ä¸ªå·¥å…·ï¼ˆæªï¼‰ï¼Œä½ å¾€é‡Œé¢è£…æ€ä¹ˆæ ·çš„å­å¼¹ï¼Œä»–å°±ä¼šæ‰“å‡ºä»€ä¹ˆæ ·å­å¼¹ã€‚</p></blockquote><h2 id="itabç¼“å­˜" tabindex="-1"><a class="header-anchor" href="#itabç¼“å­˜" aria-hidden="true">#</a> itabç¼“å­˜</h2><p>ä¸€ä¸ªéç©ºæ¥å£ç±»å‹ <code>interfacetype</code> å’Œä¸€ä¸ªåŠ¨æ€ç±»å‹ <code>_type</code> å°±å¯ä»¥ç¡®å®šä¸€ä¸ª <code>itab</code>äº†ã€‚å‰©ä½™çš„å­—æ®µè¦ä¹ˆæ¥è‡ª <code>_type</code> è¦ä¹ˆæ˜¯åŠ¨æ€ç±»å‹çš„æ–¹æ³•ã€‚ä¼¼ä¹è¿™ä¸ª <code>itab</code> æ˜¯å¯ä»¥å¤ç”¨çš„ã€‚é‚£ä¹ˆå¯¹äºä¸¤ä¸ªä¸ªéç©ºæ¥å£ç±»å‹å®šä¹‰çš„å˜é‡ï¼Œèµ‹å€¼ååªè¦åŠ¨æ€ç±»å‹ä¸å˜ï¼Œå˜å¾—åªæ˜¯åŠ¨æ€å€¼ <code>data</code>ã€‚</p><p>å®é™…ä¸Š <code>Go</code> è¯­è¨€ä¼šæŠŠç”¨åˆ°çš„ <code>itab</code> ç»“æ„ä½“ç¼“å­˜èµ·æ¥ï¼Œå¹¶ä¸”ä»¥ <strong>&lt;æ¥å£ç±»å‹ï¼ŒåŠ¨æ€ç±»å‹&gt;</strong> ç»„åˆä¸º keyï¼Œä»¥ <code>*itab</code> ä¸º <code>value</code>ï¼Œæ„æˆä¸€ä¸ªå“ˆå¸Œè¡¨ï¼Œç”¨äºå­˜å‚¨ä¸æŸ¥è¯¢ä»¥åŠå¤ç”¨ <code>itab</code> ä¿¡æ¯</p><figure><img src="https://mmbiz.qpic.cn/mmbiz_png/ibjI8pEWI9L75jtH0rYodSfoAGwwpIyARicXkrbAZP3pmf1LVqkylMEGMkskmd1CYBmkE1PEzt1eTEW9nOBicVbaA/640?wx_fmt=png&amp;tp=webp&amp;wxfrom=5&amp;wx_lazy=1&amp;wx_co=1" alt="å›¾ç‰‡" tabindex="0" loading="lazy"><figcaption>å›¾ç‰‡</figcaption></figure><p>è¿™ä¸ªå“ˆå¸Œè¡¨å¯ä¸æˆ‘ä»¬ä½¿ç”¨çš„ <code>map</code> åº•å±‚çš„å“ˆå¸Œè¡¨ä¸åŒï¼Œç»“æ„è®¾è®¡æ›´ä¸ºç®€ä¾¿ã€‚</p><div class="language-go line-numbers-mode" data-ext="go"><pre class="language-go"><code><span class="token keyword">type</span> itabTableType <span class="token keyword">struct</span> <span class="token punctuation">{</span>
    size    <span class="token builtin">uintptr</span>             <span class="token comment">// length of entries array. Always a power of 2. // entries æ•°ç»„çš„é•¿åº¦ã€‚æ€»æ˜¯ 2 çš„å¹‚ã€‚</span>
    count   <span class="token builtin">uintptr</span>             <span class="token comment">// current number of filled entries.  //å½“å‰å¡«å……çš„entriesæ•°ç›®</span>
    entries <span class="token punctuation">[</span>itabInitSize<span class="token punctuation">]</span><span class="token operator">*</span>itab <span class="token comment">// really [size] large //å®é™…çš„å¤§å°</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>å½“éœ€è¦ä¸€ä¸ª <code>itab</code> ä¼šå…ˆå» <code>itabTable</code> é‡Œé¢æŸ¥æ‰¾ï¼Œè®¡ç®—å“ˆå¸Œå€¼æ—¶ä¼šç”¨åˆ°æ¥å£ç±»å‹(<code>itab.inter</code>)å’ŒåŠ¨æ€ç±»å‹(<code>itab._type</code>)çš„ç±»å‹å“ˆå¸Œå€¼</li><li>å¦‚æœèƒ½æŸ¥è¯¢åˆ°å¯¹åº”çš„ <code>itab</code> æŒ‡é’ˆå°±ç›´æ¥æ‹¿æ¥ç”¨ï¼Œå¦‚æœæ²¡æœ‰å°±ç›´æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>itab</code>ã€‚</li></ul>`,30);function k(b,v){const e=o("ExternalLinkIcon");return c(),i("div",null,[d,n("blockquote",null,[n("p",null,[a("æ¨èé˜…è¯»ï¼š"),n("a",r,[a("ã€Golangã€‘å›¾è§£Interface"),s(e)])]),n("p",null,[n("a",u,[a("æ·±å…¥ç ”ç©¶ Go interface åº•å±‚å®ç°"),s(e)])])]),m])}const y=t(l,[["render",k],["__file","05.interface.html.vue"]]);export{y as default};
